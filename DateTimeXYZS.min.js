"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DateTimeXYZS;!function(){DateTimeXYZS=function(e){var t;if("string"==typeof e)t=document.getElementById(e);else{if("object"!=(void 0===e?"undefined":_typeof(e))||!e.tagName)return;t=e}t||alert("日期控件创建失败！"),t.style.cursor="pointer";var i,n,a,o,d,l,r,s,m,c,h,u,p,y,T,f,D,v,g,C=this,M=t.scrollWidth,b=(t.scrollHeight,t.parentNode),x=document.createElement("DIV"),Y=document.createElement("DIV"),I=document.createElement("DIV"),k=document.createElement("DIV"),E=function(e){e||(e=new Date),C.dateTime=e,C.dateTimeYear=e.getFullYear(),C.dateTimeMonth=e.getMonth()+1,C.dateTimeDate=e.getDate(),C.dateTimeWeek=C.getWeekNumber(C.dateTimeYear,C.dateTimeMonth,C.dateTimeDate),C.dateTimeDay=e.getDay(),d.value=C.dateTimeYear,m.value=C.dateTimeMonth,p.value=C.dateTimeDate,T.innerHTML=C.formatDate(C.dateTime,"www")+"，第"+C.dateTimeWeek+"周"},L={DateTime:"DateTime",Content:"Content",YearChoice:"YearChoice",MonthChoice:"MonthChoice",DateChoice:"DateChoice"},A=function e(i){v=C.divDateTime.offsetHeight,i||(i=L.Content);var n=function(e){e.style.width=M-20+"px",e.style.minWidth="130px",e.style.margin="5px",e.style.border="solid #000 1px",e.style.textAlign="center",e.style.vertAlign="middle",e.style.overflow="hidden",e.style.padding="5px"},g=function(e){e.style.height="30px",e.style.cursor="pointer",e.style.fontFamily="楷体",e.style.fontSize="14px"},b=function(e){e.style.width="50px",e.style.height="22px",e.style.margin="0px 7px 0px 7px",e.style.textAlign="center",e.style.border="solid #000 1px",e.style.cursor="pointer",e.readOnly=!0},A=function(e){for(var t=0;t<e.childNodes.length;t++)e.removeChild(e.childNodes[t])},w={Year:"Year",Month:"Month",Date:"Date"},N=function e(t,i){var n=function(e,t){var i=document.createElement("DIV");return i.style.float="left",i.style.background="#fff",i.style.border="solid #000 1px",i.style.margin="0 auto",i.style.width=e+"px",i.style.height=t+"px",i.style.lineHeight=t+"px",i.style.cursor="pointer",i.onmousemove=function(e){this.style.border="1px solid #f00"},i.onmouseout=function(e){this.style.border="solid #000 1px"},i},a=document.createElement("DIV");if(t==w.Year)for(var o=0;o<3;o++){for(var d=document.createElement("DIV"),l=0;l<4;l++){var r=n(M/4-2,v/3-2);i=i||C.dateTimeYear,0==o&&0==l?(r.innerHTML="◀",r.onclick=function(){A(Y),Y.appendChild(e(w.Year,i-8)),C.divDateTime.appendChild(Y)}):2==o&&3==l?(r.innerHTML="▶",r.onclick=function(){A(Y),Y.appendChild(e(w.Year,i+8)),C.divDateTime.appendChild(Y)}):(r.innerHTML=i-(5-4*o-l),r.setAttribute("Year",i-(5-4*o-l)),i-(5-4*o-l)==C.dateTimeYear&&(r.style.color="#fff",r.style.backgroundColor="#2d97de"),r.onclick=function(){C.dateTime.setFullYear(this.getAttribute("Year")),E(C.dateTime),H(L.Content)}),d.appendChild(r)}a.appendChild(d)}else if(t==w.Month)for(var o=0;o<4;o++){for(var d=document.createElement("DIV"),l=0;l<3;l++){var r=n(M/3-2,v/4-2);r.innerHTML=C.MonthList[3*o+l],r.setAttribute("Month",3*o+l),3*o+l+1==C.dateTimeMonth&&(r.style.color="#fff",r.style.backgroundColor="#2d97de"),r.onclick=function(){C.dateTime.setMonth(this.getAttribute("Month")),E(C.dateTime),H(L.Content)},d.appendChild(r)}a.appendChild(d)}else if(t==w.Date)for(var s=C.getMonthDays(C.dateTimeYear,C.dateTimeMonth-1),m=new Date(C.dateTimeYear,C.dateTimeMonth-1,1).getDay(),c=(s+m)%7>0?(s+m)/7+1:(s+m)/7,o=0;o<c;o++){for(var d=document.createElement("DIV"),l=0;l<7;l++){var r=n(M/7-2,v/(c+1)-2);o?7*(o-1)+l-m>-1&&7*(o-1)+l-m<s?(r.innerHTML=7*(o-1)+l-m+1,r.setAttribute("Data",7*(o-1)+l-m+1),7*(o-1)+l-m+1==C.dateTimeDate&&(r.style.color="#fff",r.style.backgroundColor="#2d97de"),r.onclick=function(){C.dateTime.setDate(this.getAttribute("Data")),E(C.dateTime),H(L.Content)}):r.innerHTML=" ":r.innerHTML=C.WeekList[l],d.appendChild(r)}a.appendChild(d)}return a};if(i==L.DateTime)A(C.divDateTime),C.divDateTime.style.width=M+"px",C.divDateTime.style.minWidth="150px",C.divDateTime.style.border="solid #000 1px",C.divDateTime.style.textAlign="center",C.divDateTime.style.vertAlign="middle",C.divDateTime.style.display="table-cell",C.divDateTime.style.overflow="hidden",C.divDateTime.style.position="absolute",C.divDateTime.style.zIndex=9999,C.divDateTime.style.backgroundColor="#fff",C.divDateTime.style.fontSize="18px",C.divDateTime.style.textIndent="0px",C.divDateTime.style.fontFamily="楷体，微软雅黑",C.divDateTime.style.fontWeight="normal",C.divDateTime.style.display="none",C.divDateTime.style.color="#000",C.divDateTime.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},C.divDateTime.appendChild(x);else if(i==L.Content){A(x),a=document.createElement("DIV"),n(a),o=document.createElement("INPUT"),o.setAttribute("type","button"),o.value="◀",g(o),o.onclick=function(){C.dateTime.setFullYear(C.dateTimeYear-1),E(C.dateTime)},a.appendChild(o),d=document.createElement("INPUT"),b(d),d.onclick=function(){e(L.YearChoice),H(L.YearChoice)},a.appendChild(d),l=document.createElement("INPUT"),l.setAttribute("type","button"),l.value="▶",g(l),l.onclick=function(){C.dateTime.setFullYear(C.dateTimeYear+1),E(C.dateTime)},a.appendChild(l);var _=document.createElement("LEBEL");_.innerHTML="年",_.style.marginLeft="7px",a.appendChild(_),x.appendChild(a),r=document.createElement("DIV"),n(r),s=document.createElement("INPUT"),s.setAttribute("type","button"),s.value="◀",g(s),s.onclick=function(){C.dateTime.setMonth(C.dateTimeMonth-2),E(C.dateTime)},r.appendChild(s),m=document.createElement("INPUT"),b(m),m.onclick=function(){e(L.MonthChoice),H(L.MonthChoice)},m.onmousemove=function(){C.divDateTime.style.display=""},r.appendChild(m),c=document.createElement("INPUT"),c.setAttribute("type","button"),c.value="▶",g(c),c.onclick=function(){C.dateTime.setMonth(C.dateTimeMonth),E(C.dateTime)},r.appendChild(c);var P=document.createElement("LEBEL");P.innerHTML="月",P.style.marginLeft="7px",r.appendChild(P),x.appendChild(r),h=document.createElement("DIV"),n(h),u=document.createElement("INPUT"),u.setAttribute("type","button"),u.value="◀",g(u),u.onclick=function(){C.dateTime.setDate(C.dateTimeDate-1),E(C.dateTime)},h.appendChild(u),p=document.createElement("INPUT"),b(p),p.onclick=function(){e(L.DateChoice),H(L.DateChoice)},h.appendChild(p),y=document.createElement("INPUT"),y.setAttribute("type","button"),y.value="▶",g(y),y.onclick=function(){C.dateTime.setDate(C.dateTimeDate+1),E(C.dateTime)},h.appendChild(y);var V=document.createElement("LEBEL");V.innerHTML="日",V.style.marginLeft="7px",h.appendChild(V),x.appendChild(h),T=document.createElement("DIV"),n(T),x.appendChild(T);var F=document.createElement("DIV");n(F),f=document.createElement("INPUT"),f.setAttribute("type","button"),f.value="今天",g(f),f.style.float="left",f.onclick=function(){E()},F.appendChild(f),D=document.createElement("INPUT"),D.setAttribute("type","button"),D.value="确定",g(D),D.style.float="right",D.onclick=function(){t.innerHTML=C.formatDate(C.dateTime,C._dateFormat),t.setAttribute("dateTimeYear",C.dateTime.getFullYear()),t.setAttribute("dateTimeMonth",C.dateTime.getMonth()),t.setAttribute("dateTimeDate",C.dateTime.getDate()),C.divDateTime.style.display="none",C.Callback(C.dateTime)},F.appendChild(D),x.appendChild(F)}else i==L.YearChoice?(A(Y),Y.appendChild(N(w.Year)),C.divDateTime.appendChild(Y)):i==L.MonthChoice?(A(I),I.appendChild(N(w.Month)),C.divDateTime.appendChild(I)):i==L.DateChoice&&(A(k),k.appendChild(N(w.Date)),C.divDateTime.appendChild(k))},H=function(e){e||(e=L.Content),x.style.display=e==L.Content?"":"none",Y.style.display=e==L.YearChoice?"":"none",I.style.display=e==L.MonthChoice?"":"none",k.style.display=e==L.DateChoice?"":"none"},w=function(){r.style.display=C._isMonth?"":"none",h.style.display=C._isDate?"":"none",T.style.display=C._isDate?"":"none",f.value=C._isMonth?C._isDate?"今天":"本月":"今年",C.divDateTime.style.Height=C._isMonth?C._isDate?150:90:60},N=function(e,t){var i,n,a=function(){var t=parseInt(e.style.height);t>=n?(clearInterval(i),e.style.height=""):(t+=2,e.style.height=t+"px")},o=function(){var t=parseInt(e.style.height);t<=0?(clearInterval(i),e.style.display="none"):(t--,e.style.height=t+"px")};t?i=setInterval(o,1):(e.style.height="",n=e.offsetHeight,e.style.height="1px",i=setInterval(a,1))};this._isMonth=!0,this._isDate=!0,this.Callback,this._dateFormat="yyyy-MM-dd",this.divDateTime=document.createElement("DIV"),this.dateTime,this.dateTimeYear,this.dateTimeMonth,this.dateTimeDate,this.dateTimeWeek,this.dateTimeDay,this.WeekList=["日","一","二","三","四","五","六"],this.MonthList=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],this.formatDate=function(e,t){e=void 0==e?new Date:e,e="number"==typeof e?new Date(e):e,t=t||"yyyy-MM-dd HH:mm:ss";var i={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12==0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()};for(var n in i)t=t.replace(new RegExp(n+"+","g"),function(e){var t=i[n]+"";if("w"==n)return(e.length>2?"星期":"周")+C.WeekList[t];for(var a=0,o=t.length;a<e.length-o;a++)t="0"+t;return 1==e.length?t:t.substring(t.length-e.length)});return t},this.isLeapYear=function(e){return e%400==0||e%4==0&&e%100!=0},this.getMonthDays=function(e,t){return[31,null,31,30,31,30,31,31,30,31,30,31][t]||(this.isLeapYear(e)?29:28)},this.getWeekNumber=function(e,t,i){for(var n=new Date(e,0,1).getDay()+i,a=0;a<t-1;a++)n+=this.getMonthDays(e,a);return parseInt(n/7)+(n%7>0?1:0)},this.DateTimeLoad=function(e,i){e=e||new Date,E(e),H(),w(),t.innerHTML=C.formatDate(C.dateTime,C._dateFormat),t.setAttribute("dateTimeYear",C.dateTime.getFullYear()),t.setAttribute("dateTimeMonth",C.dateTime.getMonth()),t.setAttribute("dateTimeDate",C.dateTime.getDate()),C.Callback=i||function(e){}},t.onclick=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,C.divDateTime.style.display="",H(L.Content);var a=this.getAttribute("dateTimeYear"),o=this.getAttribute("dateTimeMonth"),d=this.getAttribute("dateTimeDate");a&&E(new Date(parseInt(a),parseInt(o),parseInt(d))),i=t.offsetTop,n=t.offsetLeft,C.divDateTime.style.top=i+"px",C.divDateTime.style.left=n+"px",N(C.divDateTime,""),g=document.onclick,document.onclick=function(){C.divDateTime.style.display="none",document.onclick=g}},b.appendChild(C.divDateTime),A(L.DateTime),A(L.Content),this.DateTimeLoad()},DateTimeXYZS.prototype={constructor:DateTimeXYZS,setDateFormat:function(e){return!!/(^y{1,4}-M{1,2}-d{1,2}$)|(^y{1,4}-M{1,2}$)|(^y{1,4}$)/.test(e)&&(this._isMonth=e.indexOf("M")>0,this._isDate=e.indexOf("d")>0,this._dateFormat=e,this.DateTimeLoad(this.dateTime,this.Callback),!0)}}}();